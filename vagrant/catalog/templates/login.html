{% include "part/signin_header.html" %}

<div class="container-fluid">
  <div class="row">


    <div class="col-12 col-sm p-3">
      <div class="card">
        <div class="card-body">
          <div class="g-signin2" id="google-signin-button" data-onsuccess="onSignIn"></div>
          {{ state }}
          <h3 id="result"></h3>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
  function sendIdToken (data) {
    console.log('sending:' + data)
    $.ajax({
      type: 'POST',
      url: '/login?state={{ state }}',
      contentType: 'application/octet-stream; charset=uft-8',
      data: data,
      success: function (result) {
        console.log('AJAX success');
        var redirectURL = GetURLParameter('next');
        if (redirectURL) {
          window.location.replace(unescape(redirectURL));
        }
      },
      fail: function (error) {
        console.error(error);
      }
    });
  }
</script>

{% include "part/signin_footer.html" %}